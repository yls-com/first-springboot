services:
  - type: web
    name: iot-backend
    env: docker
    plan: free
    autoDeploy: true
    # 使用仓库中的 Dockerfile 构建镜像
    dockerfilePath: Dockerfile
    envVars:
      - key: SPRING_PROFILES_ACTIVE
        value: production
      - key: PORT
        value: 8081
      # 数据库与敏感信息请在 Render 控制台或 Secrets 中设置为实际值
      - key: SPRING_DATASOURCE_URL
        value: <YOUR_MYSQL_JDBC_URL>
      - key: SPRING_DATASOURCE_USERNAME
        value: <DB_USERNAME>
      - key: SPRING_DATASOURCE_PASSWORD
        value: <DB_PASSWORD>
      - key: SPRING_DATA_MONGODB_URI
        value: <YOUR_MONGODB_URI>
      - key: SPRING_REDIS_HOST
        value: <YOUR_REDIS_HOST>
      - key: SPRING_REDIS_PORT
        value: <YOUR_REDIS_PORT>
      - key: SPRING_REDIS_PASSWORD
        value: <YOUR_REDIS_PASSWORD>
      - key: SPRING_REDIS_DATABASE
        value: <YOUR_REDIS_DATABASE>
      - key: SPRING_MAIL_USERNAME
        value: <MAIL_USERNAME>
      - key: SPRING_MAIL_PASSWORD
        value: <MAIL_PASSWORD>
      - key: HUAWEI_IOT_DEVICE_SECRET
        value: <HUAWEI_SECRET>